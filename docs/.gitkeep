# ğŸ— Giáº£i thÃ­ch Kiáº¿n trÃºc Dá»± Ãn

## 1) Solution & Root

**Monopoly.sln**  
File solution chÃ­nh, liá»‡t kÃª táº¥t cáº£ project con (Domain, Application, Infrastructure.Json, UI.Unity, cÃ¡c test projects).  
LÃ  entrypoint cho lá»‡nh `dotnet build`, `dotnet test`, CI/CD.

**README.md**  
TÃ i liá»‡u giá»›i thiá»‡u, hÆ°á»›ng dáº«n build/test/run vÃ  roadmap.

**TEST_PLAN.md**  
TÃ i liá»‡u Ä‘á»‹nh nghÄ©a cÃ¡c má»‘c (0â†’6) & checklist test/DoD.

---

## 2) `src/` (Code production)

### ğŸ“‚ Monopoly.Domain  
ğŸ“Œ **Chá»©a toÃ n bá»™ luáº­t vÃ  state core cá»§a Monopoly** â€“ UI vÃ  Application khÃ´ng Ä‘Æ°á»£c chá»©a luáº­t.

- **Core/**
  - `Player.cs` â€“ Class ngÆ°á»i chÆ¡i, giá»¯ thÃ´ng tin tiá»n, vá»‹ trÃ­, hÃ nh Ä‘á»™ng di chuyá»ƒn.
  - `Board.cs` â€“ Äáº¡i diá»‡n bÃ n cá», kÃ­ch thÆ°á»›c, cÃ³ thá»ƒ chá»©a danh sÃ¡ch Ã´.
  - `Dice.cs` â€“ Interface + implement xÃºc xáº¯c (tráº£ vá» 2 giÃ¡ trá»‹, tá»•ng, isDouble).
  - `GameContext.cs` â€“ Tráº¡ng thÃ¡i vÃ¡n chÆ¡i (players, turn index, deck) â†’ dÃ¹ng Ä‘á»ƒ serialize/restore.
  - `TurnManager.cs` â€“ Service Ä‘iá»u khiá»ƒn lÆ°á»£t chÆ¡i (roll, advance, raise event).

- **Events/**
  - `IDomainEvent`, `PlayerMoved`, â€¦ â€“ Äá»‹nh nghÄ©a sá»± kiá»‡n phÃ¡t sinh trong domain.
  - `DomainEventBus` â€“ Bá»™ nhá»› táº¡m chá»©a event; giÃºp test cÃ³ thá»ƒ Ä‘á»c ra cÃ¡c event vá»«a raise.

- **Abstractions/**
  - `Tile.cs` â€“ Abstract base class cho má»i loáº¡i Ã´ (Go, Property, Jail,â€¦).
  - `Card.cs` â€“ Abstract base class cho tháº» Chance/CommunityChest.

- **Factory/**
  - `TileFactory.cs` â€“ Äá»c cáº¥u hÃ¬nh tá»« JSON, sinh danh sÃ¡ch Tile tÆ°Æ¡ng á»©ng.

- **Strategy/**
  - `IRentStrategy.cs` â€“ Interface Ä‘á»ƒ tÃ­nh tiá»n thuÃª (Property/Railroad/Utility sáº½ implement).

- **State/**
  - `IPlayerState` & cÃ¡c class `NormalState`, `InJailState`, `BankruptState`.

> **TÃ³m láº¡i:** `Monopoly.Domain` lÃ  nÆ¡i duy nháº¥t chá»©a business rules cá»§a game.

---

### ğŸ“‚ Monopoly.Application  
ğŸ“Œ **Chá»©a UseCases + Ports** â€“ trung gian giá»¯a UI vÃ  Domain.

- **Ports/**
  - `IGameRepository` â€“ CÃ¡ch lÆ°u/khÃ´i phá»¥c state game (Memory/JSON/DB).
  - `IUiEventBus` â€“ Äáº©y thÃ´ng bÃ¡o tá»« Application â†’ UI.

- **DTO/**
  - `PlayerVM`, `BoardVM`, `TileVM`, `ToastVM` â€“ View Models Ä‘á»ƒ map domain â†’ UI.

- **Mappers/**
  - `DomainToVm.cs` â€“ HÃ m má»Ÿ rá»™ng Ä‘á»ƒ map `Player â†’ PlayerVM`.

- **UseCases/**
  - `NewGameUseCase` â€“ Khá»Ÿi táº¡o vÃ¡n má»›i, táº¡o player list, lÆ°u snapshot.
  - `RollDiceUseCase` â€“ Xá»­ lÃ½ â€œRollâ€ (má»‘c 1 sáº½ triá»ƒn khai).
  - `EndTurnUseCase` â€“ Káº¿t thÃºc lÆ°á»£t.

> **TÃ³m láº¡i:** Application Ä‘iá»u phá»‘i flow (use case), khÃ´ng chá»©a logic Monopoly.

---

### ğŸ“‚ Monopoly.Infrastructure.Json  
ğŸ“Œ **Triá»ƒn khai `IGameRepository` vá»›i JSON** (má»‘c 5 sáº½ dÃ¹ng).

- **Config/**
  - `BoardConfig.cs` â€“ Model Ä‘á»ƒ deserialize file cáº¥u hÃ¬nh bÃ n.

- **Serialization/**
  - `JsonSettings.cs` â€“ Thiáº¿t láº­p `JsonSerializerOptions`.

- **Repositories/**
  - `JsonGameRepository.cs` â€“ Hiá»‡n táº¡i lÃ  in-memory; má»‘c 5 sáº½ ghi/Ä‘á»c JSON tháº­t.

---

### ğŸ“‚ Monopoly.UI.Unity  
ğŸ“Œ **Code UI** â€“ nÆ¡i thá»±c thi trÃªn Unity (hoáº·c WebGL).

- **Scripts/Bootstrap/**
  - `AppBootstrap.cs` â€“ Khá»Ÿi táº¡o game khi app start (gá»i `NewGameUseCase`).

- **Scripts/Controllers/**
  - `GameController.cs` â€“ Láº¯ng nghe sá»± kiá»‡n UI (nháº¥n Roll) â†’ gá»i UseCase.

- **Scripts/Mapping/**
  - `UiEventBus.cs` â€“ Triá»ƒn khai `IUiEventBus`, phÃ¡t event lÃªn UI (animation/toast).

> **LÆ°u Ã½:** UI chá»‰ hiá»ƒn thá»‹ vÃ  gá»­i input, khÃ´ng chá»©a luáº­t.

---

## 3) `tests/` (Unit + Integration)

- **Monopoly.Domain.Tests/**
  - `TurnManagerTests.cs` â€“ Test di chuyá»ƒn player, raise event PlayerMoved.
  - CÃ³ thá»ƒ bá»• sung test cho `Player`, `Dice`, `EventBus`.

- **Monopoly.Application.Tests/**
  - (sáº½ táº¡o) test UseCase nhÆ° `NewGameUseCase`, `RollDiceUseCase`.

- **Monopoly.Integration.Tests/**
  - (sáº½ táº¡o) test end-to-end flow (roll, land property, tráº£ tiá»n,â€¦).

---

## 4) CI/CD

- **.github/workflows/ci.yml** â€“ Workflow build/test cháº¡y trÃªn GitHub Actions.

---

## ğŸ¯ Ã nghÄ©a tá»•ng thá»ƒ

- **Domain:** chá»©a *what the game is* (luáº­t & state).  
- **Application:** chá»©a *what happens when user does X* (use case).  
- **UI:** chá»©a *how user sees and interacts*.  
- **Infrastructure:** chá»©a *how to persist & load data*.  
- **Tests:** Ä‘áº£m báº£o má»i thay Ä‘á»•i domain cÃ³ test, CI xanh trÆ°á»›c khi merge.
